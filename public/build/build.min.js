function clone(e){if(null===e||"object"!=typeof e)return e;var t=new e.constructor;for(var a in e)t[a]=clone(e[a]);return t}function cacheState(e){var t={hasCache:!1,lang:e.lang,sendDate:e.sendDate,tracking:e.tracking,elements:e.elements};_cacheState=clone(t)}function getLocalStorage(e){return"undefined"!=typeof Storage?JSON.parse(localStorage.getItem(e)):null}function parseTracking(e){return"?utm_medium=email&utm_campaign=newsletter-"+e.yymmdd()+"&utm_source=newsletter"}var TAGS={SINGLE:1,COUPLE:2,TITLE:3,CATEGORIES:4,PLAINTEXT:5,HTMLCODE:6,FOOTER:7},STORAGE_KEY="tkbNewsletter",DB_VERSION=2,SAMPLE_DATA={SINGLE:{tag:TAGS.SINGLE,data:{link:"#",img:"http://dummyimage.com/655x150/c3e0a3/ffffff"}},COUPLE:{tag:TAGS.COUPLE,data:[{tag:TAGS.SINGLE,data:{link:"#",img:"http://dummyimage.com/323x510/c3e0a3/ffffff"}},{tag:TAGS.SINGLE,data:{link:"#",img:"http://dummyimage.com/323x510/c3e0a3/ffffff"}}]},PLAINTEXT:{tag:TAGS.PLAINTEXT,data:{text:"Lorem ipsum dolor sit amet, diam et mollis nec torquent vitae. Ipsum pharetra amet eu, ut porttitor interdum leo euismod volutpat, in integer vitae, eget potenti eget leo rhoncus. Cras sem. A elementum nascetur et praesent.",align:"left"}},HTMLCODE:{tag:TAGS.HTMLCODE,data:{htmlCode:"<p>Lorem <b>ipsum dolor</b> sit amet, diam et mollis nec torquent vitae. <i>Ipsum pharetra amet eu, ut porttitor interdum leo euismod volutpat, in integer vitae, eget potenti eget leo rhoncus. Cras sem. A elementum nascetur et praesent.</i></p>"}}},LANGUAGES=["vn","en"],defaultElements={vn:[{tag:TAGS.SINGLE,data:{link:"https://ticketbox.vn/mobile-app",img:"http://i.imgur.com/qSFFqdL.jpg"}},{tag:TAGS.TITLE,data:{kind:"eventTitleHot"}},{tag:TAGS.TITLE,data:{kind:"eventTitleNew"}},{tag:TAGS.TITLE,data:{kind:"eventTitleCategory"}},{tag:TAGS.TITLE,data:{kind:"eventTitleOther"}},{tag:TAGS.CATEGORIES},{tag:TAGS.FOOTER}],en:[{tag:TAGS.SINGLE,data:{link:"https://ticketbox.vn/mobile-app",img:"http://i.imgur.com/qSFFqdL.jpg"}},{tag:TAGS.TITLE,data:{kind:"eventTitleHot"}},{tag:TAGS.TITLE,data:{kind:"eventTitleNew"}},{tag:TAGS.TITLE,data:{kind:"eventTitleCategory"}},{tag:TAGS.TITLE,data:{kind:"eventTitleOther"}},{tag:TAGS.CATEGORIES},{tag:TAGS.FOOTER}]},Header=React.createClass({displayName:"Header",render:function(){return React.createElement("tr",null,React.createElement("td",{height:"58",style:{paddingLeft:5,paddingRight:5}},React.createElement("table",{className:"header",cellPadding:0,cellSpacing:0,width:"100%"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{style:{minWidth:310,width:"100%",paddingTop:"10px",paddingRight:"0px",paddingBottom:"5px"}},React.createElement("table",{cellPadding:0,cellSpacing:0,width:"100%"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{style:{textAlign:"left"}},React.createElement("a",{href:"https://ticketbox.vn/events",target:"_blank",style:{textDecoration:"none"}},React.createElement("img",{src:"http://i.imgur.com/jMG0A57.png",alt:"Ticketbox.vn"}))),React.createElement("td",{style:{textAlign:"right"}},React.createElement("table",{style:{"float":"right"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,"Hotline: ",this.props.hotlineNumber),React.createElement("td",null,React.createElement("div",{style:{height:16,width:1,background:"#c6c6c6",marginRight:5,marginLeft:10}})),React.createElement("td",null,React.createElement("a",{style:{textDecoration:"none"},target:"_blank",href:"https://www.facebook.com/ticketbox.vn/?ref=aymt_homepage_panel"},React.createElement("img",{src:"http://i.imgur.com/3ItWVBr.png",alt:"Ticketbox's facebook",style:{border:"none"}})),React.createElement("a",{style:{textDecoration:"none",paddingLeft:4},target:"_blank",href:"https://www.instagram.com/ticketbox_vn/"},React.createElement("img",{src:"http://i.imgur.com/IJTYTog.png",alt:"Ticketbox's instagram"})),React.createElement("a",{style:{textDecoration:"none",paddingLeft:4},target:"_blank",href:"https://twitter.com/TicketboxVn"},React.createElement("img",{src:"http://i.imgur.com/VKuydCK.png",alt:"Ticketbox's twitter"})),React.createElement("a",{style:{textDecoration:"none",paddingLeft:4},target:"_blank",href:"https://www.youtube.com/channel/UCke7Kezs4s8pw-17jPiQOOQ"},React.createElement("img",{src:"http://i.imgur.com/VljmHHS.png",alt:"Ticketbox's youtube"}))))))))))))))))}}),PLAINTEXT=React.createClass({displayName:"PLAINTEXT",handleDragStart:function(){return this.props.handleDragStart(this)},handleDragOver:function(e){return e.preventDefault(),this.props.handleDragOver(this)},handleDragLeave:function(){return this.props.handleDragLeave(this)},handleDrop:function(){return this.props.handleDrop(this)},handleMouseOver:function(e){return e.preventDefault(),this.props.handleMouseOver(this)},render:function(){var e=this.props.data;return React.createElement("tr",{draggable:"true",onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,onMouseOver:this.handleMouseOver},React.createElement("td",{style:{textAlign:e.align,paddingLeft:6,paddingRight:6},align:e.align},React.createElement("p",null,e.text)))}}),HTMLCODE=React.createClass({displayName:"HTMLCODE",handleDragStart:function(){return this.props.handleDragStart(this)},handleDragOver:function(e){return e.preventDefault(),this.props.handleDragOver(this)},handleDragLeave:function(){return this.props.handleDragLeave(this)},handleDrop:function(){return this.props.handleDrop(this)},handleMouseOver:function(e){return e.preventDefault(),this.props.handleMouseOver(this)},render:function(){return React.createElement("tr",{draggable:"true",onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,onMouseOver:this.handleMouseOver},React.createElement("td",{style:{paddingLeft:6,paddingRight:6},dangerouslySetInnerHTML:{__html:this.props.data.htmlCode}}))}}),COLUMN=React.createClass({displayName:"COLUMN",handleMouseOver:function(e){return e.preventDefault(),this.props.handleMouseOver(this)},render:function(){var e=this.props;return React.createElement("div",{style:{display:"inline-block",minWidth:323,paddingTop:20,margin:"0 1px"},onMouseOver:this.handleMouseOver},React.createElement("a",{className:"img-link",href:e.link,target:"_blank"},React.createElement("img",{src:e.img,style:{maxWidth:"100%"},alt:!0})))}}),TITLE=React.createClass({displayName:"TITLE",handleDragStart:function(){return this.props.handleDragStart(this)},handleDragOver:function(e){return e.preventDefault(),this.props.handleDragOver(this)},handleDragLeave:function(){return this.props.handleDragLeave(this)},handleDrop:function(){return this.props.handleDrop(this)},render:function(){return React.createElement("tr",{draggable:"true",onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},React.createElement("td",{style:{padding:"0 5px"}},React.createElement("div",{style:{padding:"50px 0 10px"}},React.createElement("table",{className:"titleCategory",cellSpacing:0,cellPadding:0,width:"100%"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{align:"right",style:{width:"21%",minWidth:"10%"}},React.createElement("div",{style:{width:"100%",height:2}})),React.createElement("td",{align:"center",style:{width:378,minWidth:310}},React.createElement("img",{src:this.props.img,alt:!0,style:{width:"100%",minWidth:310}})),React.createElement("td",{align:"left",style:{width:"21%",minWidth:"10%"}},React.createElement("div",{style:{width:"100%",height:2}}))))))))}}),SINGLE=React.createClass({displayName:"SINGLE",handleDragStart:function(){return this.props.handleDragStart(this)},handleDragOver:function(e){return e.preventDefault(),this.props.handleDragOver(this)},handleDragLeave:function(){return this.props.handleDragLeave(this)},handleDrop:function(){return this.props.handleDrop(this)},handleMouseOver:function(e){return e.preventDefault(),this.props.handleMouseOver(this)},render:function(){var e=(this.props.common,this.props.tracking),t=this.props.data;return React.createElement("tr",{draggable:"true",onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,onMouseOver:this.handleMouseOver},React.createElement("td",{style:{textAlign:"center",paddingLeft:6,paddingRight:6},align:"center"},React.createElement("a",{className:"img-link",href:t.link+e,style:{textDecoration:"none"},target:"_blank"},React.createElement("img",{src:t.img,style:{width:"100%",minWidth:310,marginTop:20}}))))}}),COUPLE=React.createClass({displayName:"COUPLE",handleDragStart:function(){return this.props.handleDragStart(this)},handleDragOver:function(e){return e.preventDefault(),this.props.handleDragOver(this)},handleDragLeave:function(){return this.props.handleDragLeave(this)},handleDrop:function(){return this.props.handleDrop(this)},handleMouseOver:function(e){return this.props.handleMouseOver(e)},render:function(){var e=this,t=this.props.tracking,a=this.props.data;return React.createElement("tr",{draggable:"true",onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},React.createElement("td",{style:{textAlign:"center"},align:"center"},a.map(function(a,n){var r=a.data;return React.createElement(COLUMN,{posx:e.props.posx,posy:n,img:r.img,link:r.link+t,handleMouseOver:e.handleMouseOver})})))}}),CATEGORIES=React.createClass({displayName:"CATEGORIES",handleDragStart:function(){return this.props.handleDragStart(this)},handleDragOver:function(e){return e.preventDefault(),this.props.handleDragOver(this)},handleDragLeave:function(){return this.props.handleDragLeave(this)},handleDrop:function(){return this.props.handleDrop(this)},handleMouseOver:function(e){return e.preventDefault(),this.props.handleMouseOver(this)},render:function(){var e=this.props.content;return React.createElement("tr",{draggable:"true",onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,onMouseOut:this.props.handleMouseOut},React.createElement("td",{style:{padding:"0 5px",textAlign:"center"},valign:"top"},React.createElement("div",{style:{width:"100%",textAlign:"center"}},React.createElement("div",{style:{display:"inline-block",width:"26%",verticalAlign:"top",textAlign:"center",marginBottom:30}},React.createElement("a",{className:"img-link",href:"https://ticketbox.vn/events?Categories=8%2C9%2C10%2C11%2C12",style:{textDecoration:"none",color:"#333"},target:"_blank"},React.createElement("img",{src:"http://i.imgur.com/AuwV5Be.png",alt:!0,style:{maxWidth:"100%"}}),React.createElement("p",{style:{textTransform:"uppercase",fontSize:12}},e.cateEntertainment))),React.createElement("div",{style:{display:"inline-block",width:"26%",verticalAlign:"top",textAlign:"center",marginBottom:30,marginRight:"7%",marginLeft:"7%"}},React.createElement("a",{className:"img-link",href:"https://ticketbox.vn/events?Categories=2%2C4",style:{textDecoration:"none",color:"#333"},target:"_blank"},React.createElement("img",{src:"http://i.imgur.com/Gnpcl45.png",alt:!0,style:{maxWidth:"100%"}}),React.createElement("p",{style:{textTransform:"uppercase",fontSize:12}},e.cateLearning))),React.createElement("div",{style:{display:"inline-block",width:"26%",verticalAlign:"top",textAlign:"center",marginBottom:30}},React.createElement("a",{className:"img-link",href:"https://ticketbox.vn/events?Categories=3%2C5%2C6%2C7%2C13",style:{textDecoration:"none",color:"#333"},target:"_blank"},React.createElement("img",{src:"http://i.imgur.com/D5P9e6v.png",alt:!0,style:{maxWidth:"100%"}}),React.createElement("p",{style:{textTransform:"uppercase",fontSize:12}},e.cateEverythingElse)))),React.createElement("div",{style:{width:"100%",textAlign:"center"}},React.createElement("div",{style:{padding:"0 5px",textAlign:"center",paddingBottom:30}},React.createElement("a",{href:"https://ticketbox.vn/events",style:{display:"inline-block",padding:"15px 30px",textTransform:"uppercase",color:"#fff",textDecoration:"none",fontSize:14,fontWeight:"bold",background:"#90b933"},target:"_blank"},e.cateBrowseAll)))))}}),BodyFooter=React.createClass({displayName:"BodyFooter",handleDragStart:function(){return this.props.handleDragStart(this)},handleDragOver:function(e){return e.preventDefault(),this.props.handleDragOver(this)},handleDragLeave:function(){return this.props.handleDragLeave(this)},handleDrop:function(){return this.props.handleDrop(this)},render:function(){var e=this.props.content;return React.createElement("tr",{onDragStart:this.handleDragStart,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,draggable:"true"},React.createElement("td",null,React.createElement("p",{style:{textAlign:"center",fontSize:12,lineHeight:"20px",paddingTop:"10px",paddingRight:"20px",paddingBottom:"20px"}},React.createElement("a",{href:"https://ticketbox.vn",style:{fontWeight:"bold",color:"#333",textDecoration:"none"},target:"_blank"},"® Ticketbox 2015"),React.createElement("br",null),e.developBy)))}}),Footer=React.createClass({displayName:"Footer",render:function(){var e=this.props.content;return React.createElement("div",{className:"footer",style:{background:"#d5d7db"}},React.createElement("div",{style:{maxWidth:665,margin:"0 auto"}}),React.createElement("table",{cellSpacing:0,cellPadding:0,width:"100%",align:"center"},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{style:{paddingLeft:"5px",paddingRight:"5px",textAlign:"center",fontSize:10,lineHeight:"17px"}},React.createElement("p",{style:{paddingTop:"7px",paddingBottom:"7px"},dangerouslySetInnerHTML:{__html:e.footerContent}}))))))}}),Input=React.createClass({displayName:"Input",onChange:function(e){var t=e.target.value,a=this.props.mkey;return this.props.handleChangeProperty(a,t)},render:function(){return React.createElement("input",{className:"w-100",value:this.props.value,type:this.props.type,onChange:this.onChange})}}),TextArea=React.createClass({displayName:"TextArea",onChange:function(e){var t=e.target.value,a=this.props.mkey;return this.props.handleChangeProperty(a,t)},render:function(){return React.createElement("textarea",{className:"w-100",rows:"3",onChange:this.onChange},this.props.value)}}),Builder=React.createClass({displayName:"Builder",getInitialState:function(){return this.props,{blockType:TAGS.SINGLE}},changeBlockType:function(e){var t=e.target.value;this.setState({blockType:t})},addNewBlock:function(){return this.props.addNewBlock(parseInt(this.state.blockType))},exportNewsletter:function(){var e='<!DOCTYPE HTML><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cơ hội cuối cùng để gặp huyền thoại thế giới trong tháng 12 này!</title> </head> <body style="margin: 0; padding: 0; border-spacing: 0px !important; font-family: Tahoma, sans-serif, Helvetica; font-size: 13px; color: #333333;"> <div style="background:url(http://i.imgur.com/crA7q0C.jpg) top left repeat-x #E2E2E2; " align="center">'+document.getElementById("content").innerHTML+"</div> </body> </html>",t=document.createElement("a");t.href="data:text/html;charset=UTF-8,"+encodeURIComponent(e),t.target="_blank",t.style.display="none",t.download="Newsletter-"+this.props.sendDate+"_"+this.props.lang+".html",document.body.appendChild(t),t.click()},exportJSON:function(){var e=this.props.elements,t=document.createElement("a");t.href="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),t.target="_blank",t.style.display="none",t.download="Newsletter-"+this.props.sendDate+".json",document.body.appendChild(t),t.click()},handleSelectFile:function(e){var t=this,a=e.target.files[0];if("application/json"!=a.type)return alert("Please select a JSON file"),!1;var n=new FileReader;n.onload=function(e){return function(e){JsonObj=JSON.parse(e.target.result),t.props.handleImportData(JsonObj)}}(a),n.readAsText(a)},handleDragOverTrash:function(e){var t=e.target;e.preventDefault(),t.className="trash drag-over"},handleDragLeaveTrash:function(e){var t=e.target;t.className="trash"},handleDropToTrash:function(e){var t=e.target;t.className="trash",this.props.handleDeleteElement()},handleChangeProperty:function(e,t){var a=this.props.editingElement.data;a[e]=t,this.props.handleEditElement(a)},render:function(){var e=this,t=this.props.editingElement,a=function(){switch(t.tag){case TAGS.CATEGORIES:return console.log(t.data.kind),React.createElement("tr",null,React.createElement("td",null,"a"),React.createElement("td",null,t.data.kind));case TAGS.SINGLE:return t.data.map(function(t,a){var n="";return"function"!=typeof t?("link"==a?n="Link to":"img"==a&&(n="Image"),React.createElement("tr",null,React.createElement("td",null,n),React.createElement("td",null,React.createElement(Input,{type:"text",mkey:a,value:t,handleChangeProperty:e.handleChangeProperty})))):void 0});case TAGS.PLAINTEXT:case TAGS.HTMLCODE:return t.data.map(function(t,a){return"function"!=typeof t?"align"==a?React.createElement("tr",null,React.createElement("td",null,"Text align:"),React.createElement("td",null,React.createElement(Input,{type:"text",mkey:a,value:t,handleChangeProperty:e.handleChangeProperty}))):React.createElement("tr",null,React.createElement("td",{colSpan:"2"},React.createElement(TextArea,{mkey:a,value:t,handleChangeProperty:e.handleChangeProperty}))):void 0});default:return}}();return React.createElement("div",{className:this.props.className,id:"builder",onMouseOver:this.props.hideContextMenu},React.createElement("div",{className:"docker"},React.createElement("table",{style:{width:"100%"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("th",{colSpan:"2",style:{borderTop:0}},"Setting tool")),React.createElement("tr",null,React.createElement("td",null,React.createElement("label",{className:"w-100"},"Language:")),React.createElement("td",null,React.createElement("div",{className:"custom-select w-100"},React.createElement("select",{value:this.props.lang,onChange:this.props.handleChangeLanguage},React.createElement("option",{value:"vn"},"Vietnam"),React.createElement("option",{value:"en"},"English"))))),React.createElement("tr",null,React.createElement("td",null,React.createElement("label",null,"Send date:",React.createElement("br",null),React.createElement("small",{style:{color:"#ccc"}},"(mm/dd/yy)"))),React.createElement("td",null,React.createElement("input",{className:"w-100",value:this.props.sendDate,type:"date",onChange:this.props.handleChangeSendDate}))),React.createElement("tr",null,React.createElement("td",{colSpan:"2",height:"10",style:{height:10}})),React.createElement("tr",null,React.createElement("th",{colSpan:"2"},"Add Tool")),React.createElement("tr",null,React.createElement("td",null,React.createElement("label",null,"Row type:")),React.createElement("td",null,React.createElement("div",{className:"add-row"},React.createElement("div",{className:"custom-select"},React.createElement("select",{value:this.state.blockType,onChange:this.changeBlockType},React.createElement("option",{value:TAGS.SINGLE},"Row 1 event"),React.createElement("option",{value:TAGS.COUPLE},"Row 2 events"),React.createElement("option",{value:TAGS.PLAINTEXT},"Plain Text"),React.createElement("option",{value:TAGS.HTMLCODE},"Html code"))),React.createElement("button",{onClick:this.addNewBlock},"Add +")))),React.createElement("tr",null,React.createElement("td",{colSpan:"2",height:"10",style:{height:10}}))),React.createElement("tbody",null,React.createElement("tr",null,React.createElement("th",{colSpan:"2"},"Edit Tool")),a),React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{colSpan:"2"},React.createElement("div",{className:"trash",onDragOver:this.handleDragOverTrash,onDragLeave:this.handleDragLeaveTrash,onDrop:this.handleDropToTrash,draggable:"true"},"Drop here to delete"))))),React.createElement("table",{style:{width:"100%"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("button",{className:"btn w-100",disabled:!this.props.hasCache,onClick:this.props.undoChanges},"⤺ Undo")),React.createElement("td",null,React.createElement("button",{className:"btn w-100",onClick:this.props.resetElements},"⟲ Clear"))),React.createElement("tr",null,React.createElement("td",null,React.createElement("button",{className:"btn w-100",onClick:this.exportJSON},"⇱ Export json")),React.createElement("td",null,React.createElement("button",{className:"btn w-100",onClick:this.exportNewsletter},"⇱ View html"))),React.createElement("tr",null,React.createElement("td",{colSpan:"2"},React.createElement("input",{type:"file",onChange:this.handleSelectFile})))))))}}),ContextMenu=React.createClass({displayName:"ContextMenu",render:function(){return React.createElement("div",{className:"edit-menu",style:{display:this.props.state?"block":"none",top:this.props.top,right:this.props.right}},React.createElement("button",{onClick:this.props.toggleEditor},"✎"))}});String.prototype.yymmdd=function(){var e=this.split("-");return e[0].replace("20","")+"-"+e[1]+"-"+e[2]},Object.prototype.saveToStorage=function(e){var t=JSON.stringify(this);"undefined"!=typeof Storage&&localStorage.setItem(e,t)},Object.defineProperty(Object.prototype,"map",{value:function(e,t){t=t||this;var a=this,n={};return Object.keys(a).forEach(function(r){n[r]=e.call(t,a[r],r,a)}),n}}),Array.prototype.move=function(e,t){if(t>=this.length)for(var a=t-this.length;a--+1;)this.push(void 0);return this.splice(t,0,this.splice(e,1)[0]),this},window.Object.defineProperty(Element.prototype,"documentOffsetTop",{get:function(){return this.offsetTop+(this.offsetParent?this.offsetParent.documentOffsetTop:0)}}),window.Object.defineProperty(Element.prototype,"documentOffsetLeft",{get:function(){return this.offsetLeft+(this.offsetParent?this.offsetParent.documentOffsetLeft:0)}}),window.Object.defineProperty(Element.prototype,"documentOffsetRight",{get:function(){return window.innerWidth-(this.offsetLeft+this.offsetWidth+(this.offsetParent?this.offsetParent.documentOffsetLeft:0))}});var _dragStartIndex=0,_editTargetIndex=[],_editingIndex=[],_cacheState=null,Newsletter=React.createClass({displayName:"Newsletter",builderWidth:300,getInitialState:function(){var e=this.props.data,t="2016-01-20",a="vn",n=defaultElements,r=getLocalStorage(STORAGE_KEY);return r&&r.version==DB_VERSION&&(t=r.sendDate,a=r.lang,n=r.elements),{hasCache:!1,windowWidth:window.innerWidth,sendDate:t,tracking:parseTracking(t),lang:a,common:e.common,content:e.languages[a],elements:n,contextMenuState:0,contextMenuOffset:{top:0,left:0},editingElement:{},isEditing:!1}},componentDidMount:function(){window.addEventListener("resize",this.handleResize)},componentWillUnmount:function(){window.removeEventListener("resize",this.handleResize)},handleResize:function(e){this.setState({windowWidth:window.innerWidth})},addNewBlock:function(e){var t=this;cacheState(t.state);var a=t.state.elements,n={};switch(e){case TAGS.SINGLE:n=SAMPLE_DATA.SINGLE;break;case TAGS.COUPLE:n=SAMPLE_DATA.COUPLE;break;case TAGS.PLAINTEXT:n=SAMPLE_DATA.PLAINTEXT;break;case TAGS.HTMLCODE:n=SAMPLE_DATA.HTMLCODE}LANGUAGES.forEach(function(e){var t=a[e];t.splice(t.length-3,0,clone(n))}),t.setState({hasCache:!0,elements:a}),setTimeout(function(){t.saveCurrentState()},10)},handleChangeLanguage:function(e){var t=this;cacheState(t.state);var a=t.props.data,n=e.target.value;t.setState({hasCache:!0,lang:n,content:a.languages[n]}),setTimeout(function(){t.saveCurrentState()},10)},handleChangeSendDate:function(e){var t=this,a=e.target.value;if(!a)return alert("Pick a date!"),e.target.value=this.state.sendDate,!1;cacheState(t.state);var n=parseTracking(a);t.setState({hasCache:!0,sendDate:a,tracking:n}),setTimeout(function(){t.saveCurrentState()},10)},handleDragStart:function(e){_dragStartIndex=e.props.posx;var t=e.getDOMNode();t.className="draging"},handleDrop:function(e){var t=this,a=e.getDOMNode(),n=e.props.posx,r=this.state.elements;cacheState(t.state),LANGUAGES.forEach(function(e){var t=r[e];t.move(_dragStartIndex,n)}),a.className="",t.setState({hasCache:!0,elements:r}),setTimeout(function(){t.saveCurrentState()},10)},handleDragOver:function(e){var t=e.getDOMNode();t.className="drag-over"},handleDragLeave:function(e){var t=e.getDOMNode();t.className=""},handleDeleteElement:function(e){var t=this,a=this.state.elements;cacheState(t.state),LANGUAGES.forEach(function(e){var t=a[e];t.splice(_dragStartIndex,1)}),t.setState({hasCache:!0,elements:a}),setTimeout(function(){t.saveCurrentState()},10)},handleImportData:function(e){var t=this;cacheState(t.state),t.setState({hasCache:!0,elements:e}),setTimeout(function(){t.saveCurrentState()},10)},handleMouseOver:function(e){var t=e.getDOMNode();_editTargetIndex=!isNaN(e.props.posy)&&e.props.posy>-1?[e.props.posx,e.props.posy]:[e.props.posx],this.setState({contextMenuOffset:{top:t.documentOffsetTop,right:t.documentOffsetRight},contextMenuState:1})},toggleEditor:function(){var e=this.state.elements[this.state.lang],t={},a=_editTargetIndex;2==a.length?t=e[a[0]].data[a[1]]:1==a.length&&(t=e[a[0]]),this.setState({isEditing:!0,editingElement:t})},handleEditElement:function(e){var t=this;cacheState(t.state);var a=this.state.elements,n=a[this.state.lang];2==_editingIndex.length?n[_editingIndex[0]].data[_editingIndex[1]].data=e:1==_editingIndex.length&&(n[_editingIndex[0]].data=e),this.setState({hasCache:!0,elements:a}),setTimeout(function(){t.saveCurrentState()},10)},hideContextMenu:function(e){},undoChanges:function(){var e=this;_cacheState&&(e.setState(_cacheState),_cacheState=null,setTimeout(function(){e.saveCurrentState()},10))},resetElements:function(){var e=confirm("Want to reset?");if(e){var t=this;t.setState({elements:defaultElements}),setTimeout(function(){t.saveCurrentState()},10)}},saveCurrentState:function(){var e=this.state,t={version:DB_VERSION,sendDate:e.sendDate,lang:e.lang,elements:this.state.elements};t.saveToStorage(STORAGE_KEY)},render:function(){var e=this,t=(this.props.data.common,this.state.tracking),a={handleDragStart:e.handleDragStart,handleDrop:e.handleDrop,handleDragOver:e.handleDragOver,handleDragLeave:e.handleDragLeave,handleMouseOver:e.handleMouseOver,handleMouseOut:e.handleMouseOut},n={hasCache:e.state.hasCache,lang:e.state.lang,sendDate:e.state.sendDate,tracking:e.state.tracking,elements:e.state.elements,isEditing:e.state.isEditing,editingElement:e.state.editingElement,handleEditElement:e.handleEditElement,handleChangeLanguage:e.handleChangeLanguage,handleChangeSendDate:e.handleChangeSendDate,handleDeleteElement:e.handleDeleteElement,handleImportData:e.handleImportData,addNewBlock:e.addNewBlock,undoChanges:e.undoChanges,resetElements:e.resetElements,hideContextMenu:e.hideContextMenu},r={toggleEditor:e.toggleEditor,top:e.state.contextMenuOffset.top,right:e.state.contextMenuOffset.right,state:e.state.contextMenuState};return React.createElement("div",{className:"email-wrapper"},React.createElement("div",{id:"content",className:"email-content",style:{width:this.state.windowWidth-this.builderWidth,textAlign:"center",background:"url(http://i.imgur.com/crA7q0C.jpg) top left repeat-x #E2E2E2"}},React.createElement("table",{cellPadding:0,cellSpacing:0,width:"100%",background:"http://i.imgur.com/crA7q0C.jpg",style:{backgroundRepeat:"repeat-x"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("center",null,React.createElement("div",{style:{maxWidth:665,margin:"0 auto"}},React.createElement("table",{cellPadding:0,cellSpacing:0,style:{minWidth:320,width:"100%"},align:"center"},React.createElement("tbody",null,React.createElement(Header,{hotlineNumber:this.state.common.hotlineNumber}),this.state.elements[this.state.lang].map(function(n,r){var l=n.tag;switch(l){case TAGS.CATEGORIES:return React.createElement(CATEGORIES,React.__spread({posx:r},a,{content:e.state.content}));case TAGS.PLAINTEXT:return React.createElement(PLAINTEXT,React.__spread({posx:r},a,{data:n.data}));case TAGS.HTMLCODE:return React.createElement(HTMLCODE,React.__spread({posx:r},a,{data:n.data}));case TAGS.COUPLE:return React.createElement(COUPLE,React.__spread({posx:r},a,{data:n.data,common:e.state.common,tracking:t}));case TAGS.SINGLE:return React.createElement(SINGLE,React.__spread({posx:r},a,{data:n.data,common:e.state.common,tracking:t}));case TAGS.TITLE:return React.createElement(TITLE,React.__spread({posx:r},a,{img:e.state.content[n.data.kind]}));case TAGS.FOOTER:return React.createElement(BodyFooter,React.__spread({posx:r},a,{content:e.state.content}));default:return""}}))))),React.createElement(Footer,{content:this.state.content})))))),React.createElement(ContextMenu,React.__spread({},r)),React.createElement(Builder,React.__spread({},n,{className:"email-builder",style:{width:this.builderWidth}})))}}),data={common:{hotlineNumber:"+848.7300.7998"},languages:{vn:{appAdsImg:"http://i.imgur.com/RbkZmt3.jpg",eventTitleHot:"http://i.imgur.com/wi2LgRD.png",eventTitleNew:"http://i.imgur.com/AUVqCIQ.png",eventTitleOther:"http://i.imgur.com/OeVOMKG.png",eventTitleCategory:"http://i.imgur.com/7KMI6tf.png",cateEntertainment:"GIẢI TRÍ",cateLearning:"HỌC HỎI",cateEverythingElse:"CÁC LĨNH VỰC KHÁC",cateBrowseAll:"Xem tất cả sự kiện",developBy:"Phát triển và quản lý bởi Công ty TNHH Keewi. 85/18A Phạm Viết Chánh, P. 19, Q. Bình Thạnh | Tp. HCM. Email: support@ticketbox.vn. Hotline: +848.7300.7998",footerContent:'Bản tin hàng tuần được gửi đến bạn để thông báo về những sự kiện nổi bật trên <a href="https://ticketbox.vn/events" target="_blank" style="font-weight: bold;color:#333; text-decoration: none">Ticketbox.vn</a>. Nhấn vào <a href="[unsubscribe]" style="font-weight: bold; color:#333; text-decoration: none" target="_blank">Unsubscribe</a> nếu bạn không muốn tiếp tục nhận tin'},en:{appAdsImg:"http://i.imgur.com/qSFFqdL.jpg",eventTitleHot:"http://i.imgur.com/bO8QTM2.png",eventTitleNew:"http://i.imgur.com/gfOVHdj.png",eventTitleOther:"http://i.imgur.com/SE80xss.png",eventTitleCategory:"http://i.imgur.com/VCIQJeH.png",cateEntertainment:"ENTERTAINMENT",cateLearning:"LEARNING",cateEverythingElse:"EVERYTHING ELSE",cateBrowseAll:"DISCOVER ALL EVENTS",developBy:"Developed and managed by Keewi co., ltd. Address: 85/18A Pham Viet Chanh Street, Ward 19, Binh Thanh District, Ho Chi Minh City. Email: support@ticketbox.vn. Hotline: +848.7300.7998",footerContent:'We send weekly email newsletters to notify our customers about upcoming great events to attend on <a href="https://ticketbox.vn/events" target="_blank" style="font-weight: bold;color:#333; text-decoration: none">Ticketbox.vn</a>. Click <a href="[unsubscribe]" style="font-weight: bold; color:#333; text-decoration: none" target="_blank">Unsubscribe</a> if you no longer wish to receive these emails.'}}};React.render(React.createElement(Newsletter,{data:data}),document.getElementById("app"));